parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";for(var e=4,t=document.querySelector(".game-field").firstElementChild,r=document.querySelector(".game-score"),n=document.querySelector(".start"),o=document.querySelectorAll("td"),i={right:"ArrowRight",left:"ArrowLeft",up:"ArrowUp",down:"ArrowDown"},c={right:"right",left:"left",up:"up",down:"down"},u=1,a=10,s=2,l=4,d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f=0;f<e;f++)for(var v=0;v<e;v++){var m=t.children[f].children[v],g=d[f][v];m.id=f.toString()+"-"+v.toString(),h(m,g)}function h(e,t){e.innerText="",e.classList.value="field-cell",t>0&&(e.innerText=t,e.classList.add("field-cell--".concat(t)))}function w(e){(document.querySelectorAll(".message").forEach(function(e){return e.classList.add("hidden")}),"Start"===n.innerText)?(window.addEventListener("keydown",S),x(),x(),n.removeEventListener("click",w)):(window.removeEventListener("keydown",S),o.forEach(function(e){e.innerText="",e.classList.value="field-cell"}),d=d.map(function(e){return e.map(function(e){return 0})}),r.innerText=0,n.classList.value="button start",n.innerText="Start",document.querySelector(".message-start").classList.remove("hidden"))}function S(e){switch(Object.values(i).includes(e.key)&&(n.classList.value="button restart",n.innerText="Restart",n.addEventListener("click",w)),e.key){case i.left:b(c.left);break;case i.right:b(c.right);break;case i.up:b(c.up);break;case i.down:b(c.down)}}function L(e){for(var t=p(e),n=0;n<t.length-1;n++)t[n]===t[n+1]&&(t[n]*=2,t[n+1]=0,r.innerText=+r.innerText+t[n]);return t=q(t=p(t))}function y(e){return Math.floor(Math.random()*e)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d.some(function(t){return t.some(function(t){return t===e})})}function k(){for(var t=0;t<e;t++)for(var r=0;r<e;r++){if(t<e-1&&r<e-1&&(d[t][r]===d[t][r+1]||d[t][r]===d[t+1][r]))return!0;if(t===e-1&&r<e-1&&d[t][r]===d[t][r+1])return!0;if(r===e-1&&t<e-1&&d[t][r]===d[t+1][r])return!0}return!1}function x(){if(E())for(var t=!1;!t;){var r=y(e),n=y(e),o=y(a);if(o=o>u?s:l,0===d[r][n]){var i=document.getElementById(r.toString()+"-"+n.toString());d[r][n]=o,i.innerText=o,i.classList.add("field-cell--".concat(o)),t=!0}}}function T(e){document.querySelector(".message-".concat(e)).classList.remove("hidden"),window.removeEventListener("keydown",S)}function p(e){return e.filter(function(e){return 0!==e})}function q(t){for(var r=t;r.length<e;)r.push(0);return r}function b(e){e===c.right||e===c.left?A(e):B(e),E(2048)?T("win"):E()||k()?x():T("lose")}function A(t){for(var r=0;r<e;r++){var n=d[r];t===c.right&&n.reverse(),n=L(n),t===c.right&&n.reverse(),d[r]=n;for(var o=0;o<e;o++){h(document.getElementById(r.toString()+"-"+o.toString()),d[r][o])}}}function B(t){for(var r=0;r<e;r++){var n=[d[0][r],d[1][r],d[2][r],d[3][r]];t===c.down&&n.reverse(),n=L(n),t===c.down&&n.reverse();for(var o=0;o<e;o++){d[o][r]=n[o],h(document.getElementById(o.toString()+"-"+r.toString()),d[o][r])}}}n.addEventListener("click",w);
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.ae057d6f.js.map